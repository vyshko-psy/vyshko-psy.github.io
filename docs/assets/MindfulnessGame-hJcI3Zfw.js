import{u as C,r as s,j as e,X as D}from"./index-CcSAm88o.js";const l=4e3,N=4e3,k=6e3,R=l+N+k,j=6e4;function E(r){return r==="inhale"||r==="hold"?1.55:1}function S(r){return r==="inhale"?`transform ${l}ms cubic-bezier(0.4,0,0.6,1)`:r==="hold"?"transform 200ms ease":r==="exhale"?`transform ${k}ms cubic-bezier(0.4,0,0.6,1)`:"transform 300ms ease"}const O=({onClose:r})=>{const{t}=C(),[n,a]=s.useState("idle"),[v,c]=s.useState(0),[h,T]=s.useState(!1),[A,d]=s.useState(60),m=s.useRef(null),i=s.useRef(null),o=s.useCallback(()=>{i.current!==null&&(cancelAnimationFrame(i.current),i.current=null)},[]),u=s.useCallback(()=>{if(m.current===null)return;const x=Date.now()-m.current;if(x>=j){a("done"),c(1),d(0);return}const g=x/j;c(g),d(Math.ceil((1-g)*60));const y=x%R;y<l?a("inhale"):y<l+N?a("hold"):a("exhale"),i.current=requestAnimationFrame(u)},[]),p=s.useCallback(()=>{o(),T(!0),a("inhale"),c(0),d(60),m.current=Date.now(),i.current=requestAnimationFrame(u)},[u,o]);s.useEffect(()=>()=>o(),[o]);const b=2*Math.PI*48,w=b*(1-v),f=n!=="idle"&&n!=="done"?n:null;return e.jsx("div",{className:"py-16 px-6 bg-background animate-fade-in",children:e.jsxs("div",{className:"max-w-sm mx-auto text-center",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:e.jsx(D,{className:"w-4 h-4"})})}),e.jsxs("p",{className:"text-primary font-medium tracking-widest uppercase text-xs mb-1",children:["ðŸŒ¿ ",t("mindfulness.label")]}),e.jsx("h3",{className:"font-heading text-2xl text-foreground mb-2",children:t("mindfulness.title")}),e.jsx("p",{className:"text-muted-foreground text-sm mb-10",children:t("mindfulness.subtitle")}),e.jsxs("div",{className:"relative flex items-center justify-center mb-10",style:{height:200},children:[e.jsxs("svg",{className:"absolute",width:"120",height:"120",viewBox:"0 0 120 120",style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:"60",cy:"60",r:"48",fill:"none",stroke:"hsl(var(--border))",strokeWidth:"2"}),h&&e.jsx("circle",{cx:"60",cy:"60",r:"48",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"2",strokeDasharray:b,strokeDashoffset:w,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.2s linear"}})]}),e.jsx("div",{className:"rounded-full bg-primary/20 border border-primary/30",style:{width:80,height:80,transform:`scale(${E(n)})`,transition:S(n),boxShadow:"0 0 30px hsl(var(--primary) / 0.2)"}}),f&&e.jsx("span",{className:"absolute font-body text-sm font-medium text-primary select-none animate-fade-in",style:{pointerEvents:"none"},children:t(`mindfulness.${f}`)},f)]}),n==="done"?e.jsxs("div",{className:"animate-fade-in space-y-4",children:[e.jsx("p",{className:"text-2xl",children:t("mindfulness.doneEmoji")}),e.jsx("p",{className:"font-heading text-xl text-foreground",children:t("mindfulness.doneTitle")}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:t("mindfulness.doneText")}),e.jsx("button",{onClick:p,className:"mt-4 px-8 py-3 rounded-full bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:t("mindfulness.restart")})]}):h?e.jsx("p",{className:"text-muted-foreground text-xs tracking-widest uppercase",children:t("mindfulness.remaining",{seconds:A})}):e.jsx("button",{onClick:p,className:"px-8 py-3 rounded-full bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:t("mindfulness.begin")})]})})};export{O as default};
