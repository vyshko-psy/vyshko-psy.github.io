import{c as L,u as M,r as t,j as e,X as q}from"./index-gJ7eUv7I.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=L("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),i=4e3,d=4e3,o=6e3,P=i+d+o,k=6e4;function U(a){return a==="inhale"?170:90}function _(a){return a==="inhale"?`width ${i}ms cubic-bezier(0.25,0.46,0.45,0.94),
            height ${i}ms cubic-bezier(0.25,0.46,0.45,0.94),
            box-shadow ${i}ms ease`:a==="hold"?`width ${d}ms ease,
            height ${d}ms ease,
            box-shadow ${d}ms ease`:a==="exhale"?`width ${o}ms cubic-bezier(0.25,0.46,0.45,0.94),
            height ${o}ms cubic-bezier(0.25,0.46,0.45,0.94),
            box-shadow ${o}ms ease`:"width 300ms ease, height 300ms ease, box-shadow 300ms ease"}function B(a){return a==="inhale"||a==="hold"?"0 0 60px hsl(var(--primary) / 0.45), 0 0 120px hsl(var(--primary) / 0.2), inset 0 0 40px hsl(var(--primary) / 0.1)":"0 0 20px hsl(var(--primary) / 0.15), 0 0 40px hsl(var(--primary) / 0.07)"}const F=({onClose:a})=>{const{t:r}=M(),[s,x]=t.useState("idle"),[W,p]=t.useState(0),[h,T]=t.useState(!1),[I,b]=t.useState(60),[y,$]=t.useState(0),[D,O]=t.useState(0),[z,E]=t.useState(0),g=t.useRef(null),m=t.useRef(null),j=t.useRef("idle"),f=t.useCallback(()=>{m.current!==null&&(cancelAnimationFrame(m.current),m.current=null)},[]),v=t.useCallback(()=>{if(g.current===null)return;const u=Date.now()-g.current;if(u>=k){const N=r("mindfulness.quotes",{returnObjects:!0});E(Math.floor(Math.random()*N.length)),x("done"),p(1),b(0);return}const C=u/k;p(C),b(Math.ceil((1-C)*60));const R=u%P;let c;R<i?c="inhale":R<i+d?c="hold":c="exhale",c!==j.current&&(j.current=c,$(N=>N+1)),x(c),m.current=requestAnimationFrame(v)},[]),S=t.useCallback(()=>{f(),j.current="inhale",T(!0),x("inhale"),p(0),b(60),$(1),O(u=>u+1),g.current=Date.now(),m.current=requestAnimationFrame(v)},[v,f]);t.useEffect(()=>()=>f(),[f]);const w=2*Math.PI*56,n=U(s),l=s!=="idle"&&s!=="done"?s:null,A=s==="inhale"?"hsl(var(--primary))":s==="hold"?"hsl(var(--accent-foreground))":"hsl(var(--muted-foreground))";return e.jsxs("div",{className:"py-8 px-6 bg-background animate-fade-in",children:[e.jsxs("div",{className:"max-w-sm mx-auto text-center",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx("button",{onClick:a,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:e.jsx(q,{className:"w-4 h-4"})})}),e.jsxs("p",{className:"text-primary font-medium tracking-widest uppercase text-xs mb-1",children:["ðŸŒ¿ ",r("mindfulness.label")]}),e.jsx("h3",{className:"font-heading text-2xl text-foreground mb-1",children:r("mindfulness.title")}),e.jsx("p",{className:"text-muted-foreground text-sm mb-5",children:r("mindfulness.subtitle")}),e.jsx("div",{className:"h-10 flex items-center justify-center mb-1",children:l&&e.jsx("span",{className:"font-heading text-3xl font-semibold",style:{color:A,letterSpacing:"0.04em",display:"inline-block",animation:l==="inhale"?`mindful-text-in ${i}ms cubic-bezier(0.25,0.46,0.45,0.94) forwards`:l==="exhale"?`mindful-text-out ${o}ms cubic-bezier(0.25,0.46,0.45,0.94) forwards`:"mindful-fade-in 0.4s ease forwards"},children:r(`mindfulness.${l}`)},`label-${l}-${y}`)}),e.jsxs("div",{className:"relative flex items-center justify-center mb-5",style:{height:200},children:[e.jsxs("svg",{className:"absolute",width:"140",height:"140",viewBox:"0 0 140 140",style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:"70",cy:"70",r:"56",fill:"none",stroke:"hsl(var(--border))",strokeWidth:"2"}),h&&e.jsx("circle",{cx:"70",cy:"70",r:"56",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"2.5",strokeDasharray:w,strokeDashoffset:w,strokeLinecap:"round",style:{animation:`mindful-progress ${k}ms linear forwards`}},`ring-${D}`)]}),h&&l&&e.jsx("div",{className:"absolute rounded-full pointer-events-none",style:{width:n,height:n,border:"2px solid hsl(var(--primary) / 0.4)",animation:"mindful-ripple 2s ease-out forwards"}},`ripple-${y}`),h&&l&&e.jsx("div",{className:"absolute rounded-full pointer-events-none",style:{width:n,height:n,border:"1px solid hsl(var(--primary) / 0.2)",animation:"mindful-ripple 2s ease-out 0.5s forwards"}},`ripple2-${y}`),e.jsx("div",{className:"rounded-full bg-primary/15 border border-primary/25 flex items-center justify-center",style:{width:n,height:n,transition:_(s),boxShadow:B(s)},children:s==="done"?e.jsxs("button",{onClick:S,className:"animate-fade-in rounded-full bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 transition-colors flex flex-col items-center justify-center gap-0.5",style:{width:n*.75,height:n*.75},children:[e.jsx("span",{className:"text-lg leading-none",children:"â†º"}),e.jsx("span",{children:r("mindfulness.restart")})]}):e.jsx(H,{style:{width:n*.38,height:n*.38,color:A,opacity:s==="exhale"?.55:.85,transform:s==="exhale"?"scaleX(-1) rotate(15deg)":"scaleX(1) rotate(0deg)",transition:`opacity ${o}ms ease, transform ${o}ms ease, color 0.4s ease,
                    width ${s==="hold"?d:s==="inhale"?i:o}ms ease,
                    height ${s==="hold"?d:s==="inhale"?i:o}ms ease`,filter:s==="exhale"?"drop-shadow(0 0 8px hsl(var(--muted-foreground) / 0.4))":"drop-shadow(0 0 12px hsl(var(--primary) / 0.7))"}})})]}),s==="done"?e.jsxs("div",{className:"animate-fade-in space-y-3",children:[e.jsx("p",{className:"text-3xl",children:r("mindfulness.doneEmoji")}),e.jsx("p",{className:"font-heading text-xl text-foreground",children:r("mindfulness.doneTitle")}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:r("mindfulness.doneText")}),e.jsxs("div",{className:"pt-3 border-t border-border",children:[e.jsx("p",{className:"font-heading text-base text-foreground/80 italic leading-relaxed",children:r("mindfulness.quotes",{returnObjects:!0})[z]}),e.jsxs("p",{className:"text-primary text-xs font-medium tracking-wider uppercase mt-2",children:["â€” ",r("mindfulness.quoteAuthor")]})]})]}):h?e.jsx("p",{className:"text-muted-foreground text-xs tracking-widest uppercase",children:r("mindfulness.remaining",{seconds:I})}):e.jsx("button",{onClick:S,className:"px-8 py-3 rounded-full bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:r("mindfulness.begin")})]}),e.jsx("style",{children:`
        @keyframes mindful-progress {
          from { stroke-dashoffset: ${w}; }
          to   { stroke-dashoffset: 0; }
        }
        @keyframes mindful-ripple {
          0%   { transform: scale(1);   opacity: 0.7; }
          100% { transform: scale(2.2); opacity: 0;   }
        }
        @keyframes mindful-text-in {
          0%   { transform: scale(0.75); opacity: 0.4; }
          100% { transform: scale(1.22); opacity: 1;   }
        }
        @keyframes mindful-text-out {
          0%   { transform: scale(1.22); opacity: 1;   }
          100% { transform: scale(0.75); opacity: 0.4; }
        }
        @keyframes mindful-fade-in {
          0%   { opacity: 0; transform: scale(0.95); }
          100% { opacity: 1; transform: scale(1);    }
        }
      `})]})};export{F as default};
