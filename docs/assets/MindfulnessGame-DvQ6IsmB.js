import{r as s,j as e,X as w}from"./index-A2dfk12y.js";const r=4e3,c=4e3,x=6e3,A=r+c+x,b=6e4,D={idle:"",inhale:"Inhale",hold:"Hold",exhale:"Exhale",done:""};function T(n,t){return n==="inhale"?1+t*.55:n==="hold"?1.55:n==="exhale"?1.55-t*.55:1}const C=({onClose:n})=>{const[t,a]=s.useState("idle"),[N,o]=s.useState(0),[h,d]=s.useState(0),[f,j]=s.useState(!1),m=s.useRef(null),l=s.useRef(null),p=s.useCallback(()=>{if(m.current===null)return;const u=Date.now()-m.current;if(u>=b){a("done"),d(1),o(1);return}d(u/b);const i=u%A;i<r?(a("inhale"),o(i/r)):i<r+c?(a("hold"),o((i-r)/c)):(a("exhale"),o((i-r-c)/x)),l.current=requestAnimationFrame(p)},[]),g=()=>{j(!0),a("inhale"),o(0),d(0),m.current=Date.now(),l.current=requestAnimationFrame(p)};s.useEffect(()=>()=>{l.current!==null&&cancelAnimationFrame(l.current)},[]);const k=T(t,N),y=2*Math.PI*48,v=y*(1-h);return e.jsx("div",{className:"py-16 px-6 bg-background animate-fade-in",children:e.jsxs("div",{className:"max-w-sm mx-auto text-center",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close mindfulness game",children:e.jsx(w,{className:"w-4 h-4"})})}),e.jsx("p",{className:"text-primary font-medium tracking-widest uppercase text-xs mb-1",children:"üåø secret garden"}),e.jsx("h3",{className:"font-heading text-2xl text-foreground mb-2",children:"60-Second Mindfulness"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-10",children:"One minute. Just your breath."}),e.jsxs("div",{className:"relative flex items-center justify-center mb-10",style:{height:200},children:[e.jsxs("svg",{className:"absolute",width:"120",height:"120",viewBox:"0 0 120 120",style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:"60",cy:"60",r:"48",fill:"none",stroke:"hsl(var(--border))",strokeWidth:"2"}),f&&t!=="idle"&&e.jsx("circle",{cx:"60",cy:"60",r:"48",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"2",strokeDasharray:y,strokeDashoffset:v,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.1s linear"}})]}),e.jsx("div",{className:"rounded-full bg-primary/20 border border-primary/30",style:{width:80,height:80,transform:`scale(${k})`,transition:t==="inhale"?`transform ${r}ms cubic-bezier(0.4,0,0.6,1)`:t==="hold"?"transform 0ms":`transform ${x}ms cubic-bezier(0.4,0,0.6,1)`,boxShadow:"0 0 30px hsl(var(--primary) / 0.2)"}}),e.jsx("span",{className:"absolute font-body text-sm font-medium text-primary select-none",style:{pointerEvents:"none"},children:t!=="idle"&&t!=="done"?D[t]:""})]}),t==="done"?e.jsxs("div",{className:"animate-fade-in space-y-4",children:[e.jsx("p",{className:"text-2xl",children:"üçÉ"}),e.jsx("p",{className:"font-heading text-xl text-foreground",children:"Notice: Did your mind wander?"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"That's completely okay. The practice is in noticing ‚Äî and gently returning. Well done."}),e.jsx("button",{onClick:g,className:"mt-4 text-primary text-sm underline underline-offset-4 hover:text-accent-foreground transition-colors",children:"Go again"})]}):f?e.jsxs("p",{className:"text-muted-foreground text-xs tracking-widest uppercase",children:[Math.ceil((1-h)*60),"s remaining"]}):e.jsx("button",{onClick:g,className:"px-8 py-3 rounded-full bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:"Begin"})]})})};export{C as default};
